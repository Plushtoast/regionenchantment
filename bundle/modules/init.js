var c=Object.defineProperty;var t=(n,e)=>c(n,"name",{value:e,configurable:!0});Hooks.on("renderRegionLegend",(n,e)=>{g(n,e)});Hooks.on("renderRegionConfig",(n,e)=>{d(n.document.color,".window-header",e),l(n,e)});Hooks.on("renderRegionBehaviorConfig",(n,e)=>{d(n.document.parent.color,".window-header",e),l(n,e)});var i={manualHiddenRegions:new Set};Hooks.once("ready",()=>{console.warn("REGIONENCHANTMENT | Ready");let n=canvas.regions._isRegionVisible;console.log(n),canvas.regions._isRegionVisible=function(e){return console.log(e.id,i.manualHiddenRegions.has(e.id),i.manualHiddenRegions),i.manualHiddenRegions.has(e.id)?!1:n.apply(this,e)}});var g=t((n,e)=>{for(let a of $(e).find(".region-list .region")){let o=a.dataset.regionId,s=i.manualHiddenRegions.has(o)?"-slash":"";$(`<button class="icon regionHider" data-tooltip="REGIONENCHANTMENT.hideRegion"><i class="fas fa-eye${s}"></i></button>`).insertAfter($(a).find(".icon").first())}$(e).find(".regionHider").on("click",async a=>{a.preventDefault(),a.stopPropagation();let o=$(a.currentTarget).closest(".region")[0].dataset.regionId;i.manualHiddenRegions.has(o)?(i.manualHiddenRegions.delete(o),$(a.currentTarget).find("i").removeClass("fa-eye-slash").addClass("fa-eye")):(i.manualHiddenRegions.add(o),$(a.currentTarget).find("i").removeClass("fa-eye").addClass("fa-eye-slash")),console.log(o),canvas.regions.get(o).renderFlags.set({refreshState:!0})})},"addHideRegionButton"),l=t((n,e)=>{let a=$(`<button class="save-only" type="button"><i class="fas fa-save"></i><label>${game.i18n.localize("save")}</label></button>`);a.on("click",async o=>{o.preventDefault();let s=$(o.currentTarget).closest("form")[0],r=new FormDataExtended(s);await n.options.form.handler.call(n,o,s,r)}),$(e).find(".form-footer").prepend(a),$(e).find('.form-footer [type="submit"] i').addClass("fa-close").removeClass("fa-save")},"addSaveOnlyButton"),d=t((n,e,a)=>{let o=Color.from(n).toHTML(),s=$(a).find(e),r=m(o);s.css({"background-color":o,color:r}),s.find("h1").css({color:r})},"setHeaderColor");function f(n){n=n.replace(/^#/,"");let e=parseInt(n,16),a=e>>16&255,o=e>>8&255,s=e&255;return[a,o,s]}t(f,"hexToRgb");function u([n,e,a]){let o=[n,e,a].map(function(s){return s/=255,s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)});return o[0]*.2126+o[1]*.7152+o[2]*.0722}t(u,"getLuminance");function m(n){let e=f(n);return u(e)>.5?"#000000":"#FFFFFF"}t(m,"getBestContrastColor");
